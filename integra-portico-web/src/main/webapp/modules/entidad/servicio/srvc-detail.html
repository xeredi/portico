<div ng-if="vm.item">
	<tabset type="pills"> <tab heading="{{'enti_' + vm.enti.id | translate}}"
		select="vm.tabSelected(null)">
	<div class="btn-toolbar" role="toolbar">
		<div class="btn-group">
			<a class="btn btn-default" ng-href="#/servicio/srvc/edit/{{vm.enti.id}}/{{vm.item.id}}"><i
				class="glyphicon glyphicon-edit"></i> <span translate>btn_editar</span> </a> <a class="btn btn-default"
				ng-href="#/servicio/srvc/duplicate/{{vm.enti.id}}/{{vm.item.id}}"><i class="glyphicon glyphicon-tags"></i>
				<span translate>btn_duplicar</span> </a>
			<button data-ng-click="vm.remove()" class="btn btn-default">
				<i class="glyphicon glyphicon-remove"></i> <span translate>btn_borrar</span>
			</button>
		</div>
		<div class="btn-group" ng-if="vm.enti.facturable">
			<a class="btn btn-default" ng-href="#/facturacion/vlrc/valorar/{{vm.item.id}}"> <span translate>btn_valorar</span></a>
			<a class="btn btn-default" ng-href="#/facturacion/vlrc/grid/?srvcId={{vm.item.id}}"> <span translate>btn_valoraciones</span></a>
		</div>
		<div class="btn-group">
			<button ng-repeat="enac in vm.enti.enacList track by $index" ng-click="vm.srvcAction(enac.path)"
				class="btn btn-default">{{'enac_' + enac.id | translate}}</button>
		</div>
	</div>

	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-3 col-md-2 col-lg-1 form-group">
				<label translate>srvc</label>
				<p class="form-control-static" ng-bind="vm.item.etiqueta"></p>
			</div>

			<div ng-if="vm.enti.tpdtEstado" class="col-sm-3 col-md-2 col-lg-2 form-group">
				<label translate>srvc_estado</label>
				<p class="form-control-static"
					ng-bind="'cdrf_' + vm.enti.tpdtEstado.id + '_' + vm.item.estado | translate"></p>
			</div>

			<div ng-if="!vm.enti.temporal" class="col-sm-2 col-md-2 col-lg-1 form-group">
				<label translate>srvc_fref</label>
				<p class="form-control-static" ng-bind="vm.item.fref | date: ('format_datetime' | translate)"></p>
			</div>

			<div ng-if="vm.enti.temporal" class="col-sm-2 col-md-2 col-lg-1 form-group">
				<label translate>srvc_fini</label>
				<p class="form-control-static" ng-bind="vm.item.fini | date: ('format_datetime' | translate)"></p>
			</div>

			<div ng-if="vm.enti.temporal" class="col-sm-2 col-md-2 col-lg-1 form-group">
				<label translate>srvc_ffin</label>
				<p class="form-control-static" ng-bind="vm.item.ffin | date: ('format_datetime' | translate)"></p>
			</div>
		</div>

		<div ng-include="'modules/entidad/common/itdtMap-detail.html'"></div>
	</div>

	</tab> <tab heading="{{'archList' | translate}}" active="vm.tabActive[-1]" select="vm.tabSelected(-1)">
	<div>
		<div class="table-responsive">
			<table class="table-bordered table-condensed table-hover table-nonfluid">
				<thead>
					<tr>
						<th translate="arch_nombre"></th>
						<th translate="arch_tamanio"></th>
						<th translate="arch_falta"></th>
						<th />
					</tr>
				</thead>

				<tbody>
					<tr ng-repeat="arin in vm.arinList track by $index">
						<td ng-bind="arin.nombre"></td>
						<td ng-bind="arin.tamanio | number:0" class="number"></td>
						<td ng-bind="arin.falta | date: ('format_datetime' | translate)"></td>
						<td><button class="btn btn-default" ng-click="vm.download(arin.id, arin.nombre)">
								<span class="glyphicon glyphicon-save" aria-hidden="true"></span>
							</button></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	</tab> <tab ng-repeat="entiHijaId in vm.enti.entiHijasList track by $index"
		heading="{{'enti_' + entiHijaId | translate}}" active="vm.tabActive[entiHijaId]"
		select="vm.tabSelected(entiHijaId)">
	<div ng-if="vm.itemHijosMap[entiHijaId]">
		<div class="btn-toolbar" role="toolbar">
			<div class="btn-group">
				<pagination ng-show="vm.itemHijosMap[entiHijaId].count > 0"
					total-items="vm.itemHijosMap[entiHijaId].count" items-per-page="vm.itemHijosMap[entiHijaId].limit"
					ng-model="vm.pageMap[entiHijaId]" ng-change="vm.pageChanged(entiHijaId)" class="pagination" max-size="1"
					previous-text="&lsaquo;&lsaquo;" next-text="&rsaquo;&rsaquo;"></pagination>
			</div>

			<div class="btn-group">
				<a class="btn btn-default" ng-href="#/servicio/ssrv/create/{{entiHijaId}}/{{vm.item.id}}"><i
					class="glyphicon glyphicon-file"></i> <span translate>btn_crear</span></a>
			</div>
		</div>
		<div class="table-responsive">
			<span class="label label-default" translate="grid_count"
				translate-value-count="{{vm.itemHijosMap[entiHijaId].count | number:0}}"></span>

			<table class="table-bordered table-condensed table-hover table-nonfluid">
				<thead>
					<tr>
						<th class="buttonLinks" />

						<th translate>ssrv_numero</th>
						<th ng-if="vm.entiHijasMap[entiHijaId].tpdtEstado" translate>ssrv_estado</th>
						<th ng-if="vm.entiHijasMap[entiHijaId].temporal" class="date" translate>ssrv_fini</th>
						<th ng-if="vm.entiHijasMap[entiHijaId].temporal" class="date" translate>ssrv_ffin</th>

						<th ng-repeat="entd in vm.entiHijasMap[entiHijaId].entdList track by $index" ng-if="entd.gridable">{{'entd_'
							+ entd.id | translate}}</th>
					</tr>
				</thead>

				<tbody>
					<tr ng-repeat="itemHijo in ::vm.itemHijosMap[entiHijaId].list track by $index">
						<td><a ng-href="#/servicio/ssrv/detail/{{entiHijaId}}/{{::itemHijo.id}}"><span
								class="glyphicon glyphicon-search"></span></a></td>

						<td ng-bind="::itemHijo.numero" class="number"></td>
						<td ng-if="vm.entiHijasMap[entiHijaId].tpdtEstado" nowrap="nowrap" bs-tooltip
							data-title="{{('cdrf_' + vm.entiHijasMap[entiHijaId].tpdtEstado.id + '_' + itemHijo.estado | translate)}}"
							ng-bind="itemHijo.estado"></td>
						<td ng-if="vm.entiHijasMap[entiHijaId].temporal"
							ng-bind="itemHijo.fini | date: ('format_date' | translate)"></td>
						<td ng-if="vm.entiHijasMap[entiHijaId].temporal"
							ng-bind="itemHijo.ffin | date: ('format_date' | translate)"></td>

						<td ng-repeat="entd in ::vm.entiHijasMap[entiHijaId].entdList track by $index" ng-if="entd.gridable"
							ng-switch on="entd.tpdt.tipoElemento" nowrap="nowrap"><span ng-switch-when="BO"
							class="glyphicon glyphicon-{{itemHijo.itdtMap[entd.tpdt.id].cantidadEntera ? 'ok' : 'remove'}}"></span>
							<span ng-switch-when="ND" ng-bind="itemHijo.itdtMap[entd.tpdt.id].cantidadDecimal | number:2"
							class="number"></span> <span ng-switch-when="NE"
							ng-bind="itemHijo.itdtMap[entd.tpdt.id].cantidadEntera | number:0" class="number"></span> <span
							ng-switch-when="CR" bs-tooltip
							data-title="{{('cdrf_' + entd.tpdt.id + '_' + itemHijo.itdtMap[entd.tpdt.id].cadena | translate)}}"
							ng-bind="itemHijo.itdtMap[entd.tpdt.id].cadena"></span> <span ng-switch-when="TX"
							ng-bind="itemHijo.itdtMap[entd.tpdt.id].cadena"></span> <span ng-switch-when="PR" bs-tooltip
							data-title="{{itemHijo.itdtMap[entd.tpdt.id].prmt.etiqueta}}"
							ng-bind="itemHijo.itdtMap[entd.tpdt.id].prmt.parametro"></span> <span ng-switch-when="FE"
							ng-bind="[entd.tpdt.id].fecha | date: ('format_date' | translate)"></span> <span ng-switch-when="FH"
							ng-bind="itemHijo.itdtMap[entd.tpdt.id].fecha | date: ('format_datetime' | translate)"></span></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	</tab></tabset>
</div>