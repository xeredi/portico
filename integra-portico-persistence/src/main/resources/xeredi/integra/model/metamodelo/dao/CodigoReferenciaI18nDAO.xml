<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xeredi.integra.model.metamodelo.dao.CodigoReferenciaI18nDAO">
    <resultMap type="CodigoReferenciaI18nVO" id="ResultMap">
        <id column="cdri_cdrf_pk" />
        <id column="cdri_idioma" />

        <result column="cdri_cdrf_pk" property="cdrfId" />
        <result column="cdri_idioma" property="idioma" />
        <result column="cdri_texto" property="texto" />
    </resultMap>

    <sql id="SelectPrefix">
    <![CDATA[
    SELECT
        cdri_cdrf_pk, cdri_idioma, cdri_texto
    FROM tbl_codigo_ref_i18n_cdri
    ]]>
    </sql>

    <sql id="SelectWhere">
        <where>
            <if test="cdrfId != null">
                AND cdri_cdrf_pk = #{cdrfId}
            </if>
            <if test="idioma != null">
                AND cdri_idioma = #{idioma}
            </if>
        </where>
    </sql>

    <select id="selectList" parameterType="CodigoReferenciaI18nCriterioVO" resultMap="ResultMap">
        <include refid="SelectPrefix" />
        <include refid="SelectWhere" />
        ORDER BY cdri_cdrf_pk, cdri_idioma
    </select>

    <select id="exists" parameterType="CodigoReferenciaI18nVO" resultType="boolean">
    <![CDATA[
        SELECT COUNT(1)
        FROM tbl_codigo_ref_i18n_cdri
        WHERE cdri_cdrf_pk = #{cdrfId} AND cdri_idioma = #{idioma}
    ]]>
    </select>

    <insert id="insert" parameterType="CodigoReferenciaI18nVO">
    <![CDATA[
        INSERT INTO tbl_codigo_ref_i18n_cdri (cdri_cdrf_pk, cdri_idioma, cdri_texto)
        VALUES (#{cdrfId}, #{idioma}, #{texto})
    ]]>
    </insert>

    <update id="update" parameterType="CodigoReferenciaI18nVO">
    <![CDATA[
        UPDATE tbl_codigo_ref_i18n_cdri SET
            cdri_texto = #{texto}
        WHERE cdri_cdrf_pk = #{cdrfId}
            AND cdri_idioma = #{idioma}
    ]]>
    </update>

    <delete id="deleteList" parameterType="CodigoReferenciaI18nCriterioVO">
        DELETE FROM tbl_codigo_ref_i18n_cdri
        <include refid="SelectWhere" />
    </delete>
</mapper>
