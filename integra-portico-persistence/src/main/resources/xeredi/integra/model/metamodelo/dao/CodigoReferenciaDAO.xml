<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xeredi.integra.model.metamodelo.dao.CodigoReferenciaDAO">
    <resultMap type="CodigoReferenciaVO" id="ResultMap">
        <id column="cdrf_pk" property="id" />
        <result column="cdrf_tpdt_pk" property="tpdtId" />
        <result column="cdrf_valor" property="valor" />
        <result column="cdrf_orden" property="orden" />
    </resultMap>

    <sql id="SelectPrefix">
    <![CDATA[
    SELECT
        cdrf_pk, cdrf_tpdt_pk, cdrf_valor, cdrf_orden
    FROM tbl_codigo_ref_cdrf
    ]]>
    </sql>

    <sql id="SelectWhere">
        <where>
            <if test="tpdtId != null">
                AND cdrf_tpdt_pk = #{tpdtId}
            </if>
            <if test="tpdtIds != null">
                AND cdrf_tpdt_pk IN
                <foreach collection="tpdtIds" item="item" separator="," open="(" close=")">#{item}
                </foreach>
            </if>
            <if test="valor != null">
                AND cdrf_valor = #{valor}
            </if>
        </where>
    </sql>

    <select id="selectList" parameterType="CodigoReferenciaCriterioVO" resultMap="ResultMap">
        <include refid="SelectPrefix" />
        <include refid="SelectWhere" />
        <![CDATA[
        ORDER BY cdrf_tpdt_pk, cdrf_orden
        ]]>
    </select>

    <select id="selectObject" parameterType="CodigoReferenciaCriterioVO" resultMap="ResultMap">
        <include refid="SelectPrefix" />
        <include refid="SelectWhere" />
    </select>

    <select id="select" parameterType="Long" resultMap="ResultMap">
        <include refid="SelectPrefix" />
        WHERE cdrf_pk = #{value}
    </select>

    <select id="exists" parameterType="CodigoReferenciaVO" resultType="boolean">
    <![CDATA[
    	SELECT COUNT(1)
    	FROM tbl_codigo_ref_cdrf
    	WHERE cdrf_tpdt_pk = #{tpdtId} AND cdrf_valor = #{valor}
    ]]>
    </select>

    <insert id="insert" parameterType="CodigoReferenciaVO">
    <![CDATA[
    	INSERT INTO tbl_codigo_ref_cdrf (cdrf_pk, cdrf_tpdt_pk, cdrf_valor, cdrf_orden)
    	VALUES (#{id}, #{tpdtId}, #{valor}, #{orden})
    ]]>
    </insert>

    <update id="update" parameterType="CodigoReferenciaVO">
    <![CDATA[
    	UPDATE tbl_codigo_ref_cdrf SET
    		cdrf_orden = #{orden}
    	WHERE cdrf_pk = #{id}
    ]]>
    </update>

    <delete id="delete" parameterType="Long">
    <![CDATA[
    	DELETE FROM tbl_codigo_ref_cdrf
    	WHERE cdrf_pk = #{value}
    ]]>
    </delete>
</mapper>
