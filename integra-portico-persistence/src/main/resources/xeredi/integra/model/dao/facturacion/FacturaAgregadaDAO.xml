<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xeredi.integra.model.dao.facturacion.FacturaAgregadaDAO">
    <resultMap type="FacturaAgregadaVO" id="ResultMap">
        <id column="fctr_pk" />
        <id column="fctr_pagador_prmt_pk" />
        <id column="fctr_info1" />
        <id column="fctr_info2" />
        <id column="fctr_info3" />
        <id column="fctr_info4" />
        <id column="fctr_info5" />
        <id column="fctr_info6" />

        <association property="fctr" resultMap="xeredi.integra.model.dao.facturacion.FacturaDAO.ResultMap" />
        <collection property="fctsList" ofType="FacturaServicioAgregadaVO" javaType="ArrayList">
            <association property="fcts" resultMap="xeredi.integra.model.dao.facturacion.FacturaServicioDAO.ResultMap" />

            <collection property="fctlList" ofType="FacturaLineaAgregadaVO" javaType="ArrayList">
                <association property="fctl" resultMap="xeredi.integra.model.dao.facturacion.FacturaLineaDAO.ResultMap" />

                <collection property="fctdList" ofType="FacturaDetalleVO" javaType="ArrayList" />
            </collection>
        </collection>
    </resultMap>

    <sql id="SelectPrefix">
    <![CDATA[
        SELECT fcsr_pk, fcsr_serie, fcsr_anio, fcsr_numero_ultimo
        FROM tbl_factura_serie_fcsr
    ]]>
    </sql>

    <select id="selectList" parameterType="FacturadorContextoVO" resultMap="ResultMap">
        <include refid="SelectPrefix" />
    </select>
</mapper>
