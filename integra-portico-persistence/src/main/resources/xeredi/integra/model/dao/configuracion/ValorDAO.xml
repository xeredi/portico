<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xeredi.integra.model.dao.configuracion.ValorDAO">
    <resultMap type="ValorVO" id="ResultMap">
        <id column="cnvl_cnen_pk" property="cnenId" />
        <id column="cnvl_cncl_pk" property="cnclId" />
        <result column="cnvl_valor" property="valor" />
    </resultMap>

    <sql id="SelectPrefix">
    <![CDATA[
    SELECT
        cnvl_cnen_pk, cnvl_cncl_pk, cnvl_valor
    FROM tbl_configuracion_valor_cnvl
    ]]>
    </sql>

    <sql id="SelectCountPrefix">
    <![CDATA[
    SELECT
        COUNT(1)
    FROM tbl_configuracion_valor_cnvl
    ]]>
    </sql>

    <sql id="SelectWherePrefix">
        <where>
            <if test="cnenId != null">
                cnvl_cnen_pk = #{cnenId}
            </if>
            <if test="cnclId != null">
                cnvl_cncl_pk = #{cnclId}
            </if>
            <if test="cnclIds != null and !cnclIds.empty">
                AND cnvl_cncl_pk IN
                <foreach collection="cnclIds" item="item" open="(" close=")" separator=",">#{item}
                </foreach>
            </if>
        </where>
    </sql>

    <select id="selectAllList" resultMap="ResultMap">
        <include refid="SelectPrefix" />
    </select>

    <select id="selectList" resultMap="ResultMap">
        <include refid="SelectPrefix" />
        <include refid="SelectWherePrefix" />
    </select>
    
    <insert id="insert" parameterType="ValorVO">
        <![CDATA[
        INSERT INTO tbl_configuracion_valor_cnvl(cnvl_cnen_pk, cnvl_cncl_pk, cnvl_valor)
        VALUES(#{cnenId}, #{cnclId}, #{valor})
        ]]>
    </insert>
    
    <delete id="delete" parameterType="ValorCriterioVO">
	    <![CDATA[
	    DELETE
	    FROM tbl_configuracion_valor_cnvl
	    ]]>
        <include refid="SelectWherePrefix" />
    </delete>
</mapper>
