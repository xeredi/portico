<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xeredi.integra.model.dao.configuracion.ClaveIdiomaDAO">
	<resultMap type="ClaveIdiomaVO" id="ResultMap">
		<id column="cnci_pk" property="id" />
		<result column="cnci_clave" property="clave" />
		<result column="cnci_valor_defecto" property="valorDefecto" />
	</resultMap>

	<sql id="SelectPrefix">
    <![CDATA[
    SELECT
        cnci_pk, cnci_clave, cnci_valor_defecto
    FROM tbl_configuracion_clave_idioma_cnci
    ]]>
	</sql>

	<sql id="SelectCountPrefix">
    <![CDATA[
    SELECT
        COUNT(1)
    FROM tbl_configuracion_clave_idioma_cnci
    ]]>
	</sql>

	<sql id="SelectWhere">
		<where>
			<if test="clave != null">
				AND cnci_clave LIKE #{clave}
			</if>
			<if test="valorDefecto != null">
				AND cnci_valor_defecto LIKE #{valorDefecto}
			</if>
		</where>
	</sql>

	<select id="selectAllMap" resultMap="ResultMap">
		<include refid="SelectPrefix" />
	</select>

	<select id="select" resultMap="ResultMap" parameterType="Long">
		<include refid="SelectPrefix" />
		WHERE cnci_pk = #{value}
	</select>

	<select id="exists" resultType="Boolean" parameterType="ClaveIdiomaVO">
		<include refid="SelectCountPrefix" />
		WHERE cnci_clave = #{clave}
	</select>

	<select id="selectCount" resultType="Integer" parameterType="ClaveIdiomaCriterioVO">
		<include refid="SelectCountPrefix" />
		<include refid="SelectWhere" />
	</select>

	<select id="selectList" resultMap="ResultMap" parameterType="ClaveIdiomaCriterioVO">
		<include refid="SelectPrefix" />
		<include refid="SelectWhere" />

		ORDER BY cnci_clave
	</select>

	<insert id="insert" parameterType="ClaveIdiomaVO">
        <selectKey keyProperty="id" resultType="Long" order="BEFORE">
            SELECT
            NEXTVAL('sq_integra')
        </selectKey>
        <![CDATA[
        INSERT INTO tbl_configuracion_clave_idioma_cnci(cnci_pk, cnci_clave, cnci_valor_defecto)
        VALUES(#{id}, #{clave}, #{valorDefecto})
        ]]>
	</insert>

	<update id="update" parameterType="ClaveIdiomaVO">
    <![CDATA[
    UPDATE tbl_configuracion_clave_idioma_cnci SET
    	cnci_valor_defecto = #{valorDefecto}
    WHERE cnci_pk = #{id}
    ]]>
	</update>
</mapper>
