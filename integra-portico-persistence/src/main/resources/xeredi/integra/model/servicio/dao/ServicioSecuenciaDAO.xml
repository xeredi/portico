<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xeredi.integra.model.servicio.dao.ServicioSecuenciaDAO">

	<update id="incrementarSecuencia" parameterType="ServicioVO">
	    <![CDATA[
	    UPDATE tbl_servicio_secuencia_srsc SET
	    	srsc_ultimo_numero = srsc_ultimo_numero +1
	    WHERE
	        srsc_tpsr_pk = #{entiId}
	        AND srsc_subp_pk = #{subp.id}
	        AND srsc_anno = #{anno}
	    ]]>
	</update>

	<select id="obtenerSecuencia" parameterType="ServicioVO"
		resultType="Integer">
        <![CDATA[
        SELECT srsc_ultimo_numero
        FROM tbl_servicio_secuencia_srsc
	    WHERE
	        srsc_tpsr_pk = #{entiId}
	        AND srsc_subp_pk = #{subp.id}
	        AND srsc_anno = #{anno}
        ]]>
	</select>
</mapper>
