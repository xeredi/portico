<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xeredi.integra.model.dao.metamodelo.CodigoReferenciaDAO">
	<resultMap type="CodigoReferenciaVO" id="ResultMap">
		<result column="cdrf_tpdt_pk" property="tpdtId" />
		<result column="cdrf_valor" property="valor" />
		<result column="cdrf_orden" property="orden" />
	</resultMap>

	<sql id="SelectPrefix">
    <![CDATA[
    SELECT
        cdrf_tpdt_pk, cdrf_valor, cdrf_orden
    FROM tbl_codigo_referencia_cdrf
    ]]>
	</sql>

	<select id="selectList" parameterType="CodigoReferenciaCriterioVO"
		resultMap="ResultMap">
		<include refid="SelectPrefix" />
		<where>
			<if test="tpdtIds != null">
				AND cdrf_tpdt_pk IN
				<foreach collection="tpdtIds" item="item" separator="," open="(" close=")">#{item}
				</foreach>
			</if>
		</where>
        <![CDATA[
        ORDER BY cdrf_tpdt_pk, cdrf_orden
        ]]>
	</select>

	<select id="exists" parameterType="CodigoReferenciaVO" resultType="boolean">
    <![CDATA[
    	SELECT COUNT(1)
    	FROM tbl_codigo_referencia_cdrf
    	WHERE cdrf_tpdt_pk = #{tpdtId} AND cdrf_valor = #{valor}
    ]]>
	</select>

	<insert id="insert" parameterType="CodigoReferenciaVO">
    <![CDATA[
    	INSERT INTO tbl_codigo_referencia_cdrf (cdrf_tpdt_pk, cdrf_valor, cdrf_orden)
    	VALUES (#{tpdtId}, #{valor}, #{orden})
    ]]>
	</insert>

	<update id="update" parameterType="CodigoReferenciaVO">
    <![CDATA[
    	UPDATE tbl_codigo_referencia_cdrf SET
    		cdrf_orden = #{orden}
    	WHERE cdrf_tpdt_pk = #{tpdtId} AND cdrf_valor = #{valor}
    ]]>
	</update>

	<delete id="delete" parameterType="CodigoReferenciaVO">
    <![CDATA[
    	DELETE FROM tbl_codigo_referencia_cdrf
    	WHERE cdrf_tpdt_pk = #{tpdtId} AND cdrf_valor = #{valor}
    ]]>
	</delete>
</mapper>
